<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>dialog viewer</title>
    <script>
        var global_page_context_path = "";
    </script>
    <link href="/css/style.css?v=20211227_v1" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="/wsrv/app/js/jquery.min.js"></script>
    <script type="text/javascript" src="/wsrv/app/js/pub.ep.js?version=72645.00063682641"></script>
    <script type="text/javascript" src="/wsrv/app/js/iframeResizer.js"></script>


</head>


<body data-ep-view-mode="default" class="subContents legacy bg-white">
    <div>
        <div style="margin:10px 0px 10px 0px;">
            <button onclick="menuCTRL.viewMenu()" class="btn btn-save">메뉴 호출</button>
            <button onclick="menuCTRL.viewFn()" class="btn btn-save">set 호출</button>
        </div>
        <div>
            <button onclick="menuCTRL.viewCancel()" class="btn btn-save">취소</button>
        </div>
        <pre id="menuInfo"  style="width: calc(100% - 15px);height: calc(100% - 220px);position: absolute;">
            <p style="font-size: 24px;font-weight: bold;margin-top: 20px;">오류 처리</p>
        </pre>
    </div>
</body>

</html>
<script>

var menuCTRL = {
    menuDescInfo: {}
    ,viewId :''
    , init() {
        window.addEventListener("message",(evt)=>{
            console.log('recv message ', evt.data)
            const evtData = event.data;
            let evtDataObj = evtData;

            this.viewId = evtDataObj.viewId;

            $('#menuInfo').html(JSON.stringify(evtDataObj, null, 4));
        })
    }
    ,viewMenu(){
        sendMessage({
            viewId: this.viewId,
            openLayerAction: "close",
            viewType:"menu",
            menuInfo:{
                "menuCd": "MK001006",
                "menuNm": "투자손익배분",
            }
        });
    }
    ,viewFn(){
        sendMessage({
            viewId: this.viewId,
            viewType:"fn",
            view:"setJobInfo",
            openLayerAction: "close",
            viewOption:{
                param:{
                    codeName:"프로그래머",
                    code:"22211A",
                    injuryGrade:"1",
                    rskWtspCd:"2",
                }
            }
        });
    }
    ,viewCancel(){
        sendMessage({
            viewId: this.viewId,
            openLayerAction: "close",
        });
    }
    
}

function sendMessage(msg){
    parent.postMessage(msg,"*")
}
menuCTRL.init();



</script>