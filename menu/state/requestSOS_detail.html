<!DOCTYPE html>
<html>  
<head>  
<title>SOS 요청 상세</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta charset="UTF-8">
<meta env="null">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<link rel="shortcut icon" type="image/x-icon" href="/wsrv/core/images/favicon.ico">

<script>
//document.domain='heungkukfire.co.kr';
</script>

<script>
var global_page_context_path = "";
var ePortalConfig = {
	  "runtime" : "local"
	, "license" : false
	, "mainPageId" : ""
	, "page_id" : ''
	, "userInfo" : {}
	, "attachRootUrl":'/staticimg'
	, "link" : {
		  "portalMain" : ""
	}
	, "domain" : {
	}
	, "context" : {
		  "epplt" : (""||global_page_context_path)
		, "board" : (""||'')
	}
	,"fileupload":{
		"useFileExt":'gif|png|jpg|jpeg|ppt|pptx|xls|xlsx|doc|docx|zip|hwp|pdf'
		,"useMigFileExt":'xls|xlsx'
		,"maxUploadSize": 104857600
		,"maxUploadSizePerFile":20971520
	}
};
</script>

<link rel="stylesheet" href="/wsrv/app/css/plugin/jquery.toast.css">
<link href="/wsrv/app/fonts/fontello/css/fontello.css" rel="stylesheet" type="text/css" />
<link href="/wsrv/app/css/plugin/jstree/default/style.min.css" rel="stylesheet" type="text/css" />

<link href="/wsrv/app/js/plugins/mCustomScrollbar/jquery.mCustomScrollbar.css" rel="stylesheet" />
<link href="/styles/css/style.css" rel="stylesheet" type="text/css" />

<script type="text/javascript" src="/wsrv/app/js/jquery.min.js"></script> 
<script type="text/javascript" src="/wsrv/app/js/jquery-ui.min.js"></script>
<script type="text/javascript" src="/wsrv/app/js/bootstrap.js"></script> 
<script type="text/javascript" src="/wsrv/app/js/plugins/toast/jquery.toast.min.js"></script>
<script type="text/javascript" src="/wsrv/app/js/plugins/mCustomScrollbar/jquery.mCustomScrollbar.concat.min.js"></script>

<script type="text/javascript" src="/wsrv/core/js/pub.ep.js"></script>
<script type="text/javascript" src="/wsrv/core/js/pub.ep.ui.js"></script>

<script type="text/javascript" src="/wsrv/core/js/plugins/vue/vue.min.js"></script>
<script type="text/javascript" src="/wsrv/core/js/plugins/vue/vue.portal.js?version=20201207" charset="utf-8"></script>
<script type="text/javascript" src="/wsrv/app/js/plugins/sortablejs/Sortable.min.js"></script>

<script type="text/javascript" src="/wsrv/app/js/pencake.js?version=75876.43041433542"></script>
<script type="text/javascript" src="/wsrv/app/js/pencake.custom.js?version=2254.602283735585"></script>
</head>

<body data-ep-view-mode="default" class="sos-body">
    <div class="request-sos">
        <div class="content-box">
            <div class="sos-detail-content">
                <div class="detail-title-box">
                    <span class="label purple" data-label-size="m">답변완료</span>
                    <h2>[장기손사] 장기일반손사 → 사고처리 → 손해사정(장기인) </h2>
                </div>
                <div class="detail-wrap">
                    <div class="top-info">
                        <ul>
                            <li class="name">TM지원Part 장원영</li>
                            <li class="date">2025-11-26 14:36:57</li>
                            <li class="view">42</li>
                        </ul>
                    </div>
                    <div class="detail-content">
                        <div class="inner-txt">
                            설계/증권/사원번호 : 99999999-99999 <br />
                            연락처 : 02-1234-5678 <br />
                            본부/센터명 : 에이치앤티손해사정
                        </div>
                        <div class="recommand-flex">
                            <button type="button" class="btn blue-fill emoji-open" data-btn-size="m">추천</button>
                            <ul>
                                <li class="like">3</li>
                                <li class="fun">2</li>
                                <li class="useful">14</li>
                                <li class="disagree">1</li>
                                <li class="angry">2</li>
                            </ul>
                        </div>
                    </div>
                    <table class="common-table" data-table-bg="white">
                        <colgroup>
                            <col style="width: 80px;">
                            <col style="width: auto;">
                            <col style="width: 85px;">
                        </colgroup>
                        <tbody>
                            <tr>
                                <th>첨부파일</th>
                                <td>
                                    <ul class="file-list">
                                        <li><a href="javascript:;" class="txt-btn blue">등록한 파일_1.xlsx[153.54KB]</a></li>
                                        <li><a href="javascript:;" class="txt-btn blue">등록한 파일_2.xlsx[153.54KB]</a></li>
                                    </ul>
                                </td>
                                <td><button type="button" class="btn wg-line" data-btn-size="s">전체다운로드</button></td>
                            </tr>
                            <tr>
                                <th>키워드(태그)</th>
                                <td colspan="2">
                                    <ul class="keyword-list">
                                        <li>입력된 태그 1</li>
                                        <li>입력된 태그 2</li>
                                        <li>입력된 태그 3</li>
                                    </ul>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="sos-detail-comment">
                <div class="comment-input-box">
                    <div class="title-box">
                        <h4>댓글쓰기</h4>
                        <div class="flex-row gap-8">
                            <label class="input-box">
                                <input type="checkbox" class="common-checkbox" data-input-size="big" name="sosAnswer" :id="" />
                                <span></span>
                                <p class="txt">답변</p>
                            </label>
                            <p class="user-info">안유진</p>
                        </div>
                    </div>
                    <textarea class="common-textarea" placeholder="답변을 입력해주세요. 답변이 아닐 경우 답변체크를 해제하세요." rows="3"></textarea>
                    <ul class="file-list">
                        <li>
                            <div class="file-name">
                                <p>파일명파일명파일명파일명파일명파일명파일명파일명.xlsx</p>
                                <span class="capacity">[153.54 KB]</span>
                            </div>
                            <button type="button" class="del-btn" title="삭제" aria-label="삭제"></button>
                        </li>
                        <li>
                            <div class="file-name">
                                <p>파일명.xlsx</p>
                                <span class="capacity">[153.54 KB]</span>
                            </div>
                            <button type="button" class="del-btn" title="삭제" aria-label="삭제"></button>
                        </li>
                        <li>
                            <div class="file-name">
                                <p>파일명.xlsx</p>
                                <span class="capacity">[153.54 KB]</span>
                            </div>
                            <button type="button" class="del-btn" title="삭제" aria-label="삭제"></button>
                        </li>
                    </ul>
                    <div class="btn-box">
                        <div class="input-box">
                            <input type="file" class="hidden common-file-input" id="addCommentFile" />
                            <label class="btn cg-fill" data-btn-size="m" for="addCommentFile">파일추가</label>
                        </div>
                        <button type="button" class="btn" data-btn-size="m">댓글저장</button>
                    </div>
                </div>
                <div class="comment-list">
                    <div class="list-top">
                        <strong>댓글 <span>2</span></strong>
                    </div>
                    <ul>
                        <li>
                            <div class="comment-user-info">
                                <div class="user">
                                    <p class="name">IT지원팀(T/S) 안유진</p>
                                    <span class="label">답변</span>
                                </div>
                                <div class="date">2025-11-26 15:47:23</div>
                            </div>
                            <div class="comment-content">
                                해당 영수증 모두 보험금 지급일 이후 영수증 수정이 이루어졌습니다.
                            </div>
                            <div class="file-box">
                                <ul>
                                    <li><a href="javascript:;" class="txt-btn blue">등록한파일등록한파일등록한파일등록한파일_1.xlsx[153.54KB]</a></li>
                                    <li><a href="javascript:;" class="txt-btn blue">등록한파일_2.xlsx[153.54KB]</a></li>
                                    <li><a href="javascript:;" class="txt-btn blue">등록한파일_3.xlsx[153.54KB]</a></li>
                                    <li><a href="javascript:;" class="txt-btn blue">등록한파일_4.xlsx[153.54KB]</a></li>
                                </ul>
                                <button type="button" class="btn wg-line">전체다운로드</button>
                            </div>
                            <div class="recommand-flex">
                                <button type="button" class="btn blue-fill emoji-open" data-btn-size="m">추천</button>
                                <ul>
                                    <li class="like">3</li>
                                    <li class="fun">2</li>
                                </ul>
                            </div>
                            <div class="btn-wrap my-btn">
                                <button type="button" class="btn black-line" data-btn-size="m">삭제</button>
                                <button type="button" class="btn black-line" data-btn-size="m">수정</button>
                            </div>
                        </li>
                        <li>
                            <div class="comment-user-info">
                                <div class="user">
                                    <p class="name">장기보상시스템Part 김지원</p>
                                </div>
                                <div class="date">2025-11-26 15:47:23</div>
                            </div>
                            <div class="comment-content">
                                납면배서는 사고일 기준으로 이력을 생성하다보니, 진배서종료일자와 현배서의 시작일자가 맞아야 하는데, 역전되어 처리되다보니, 해당사고일자로 중복으로 조회되어 오류 발생하였습니다.
                            </div>
                            <div class="file-box">
                                <ul>
                                    <li><a href="javascript:;" class="txt-btn blue">등록한파일_1.xlsx[153.54KB]</a></li>
                                    <li><a href="javascript:;" class="txt-btn blue">등록한파일_2.xlsx[153.54KB]</a></li>
                                </ul>
                                <button type="button" class="btn wg-line">전체다운로드</button>
                            </div>
                            <div class="recommand-flex">
                                <button type="button" class="btn blue-fill emoji-open" data-btn-size="m">추천</button>
                                <ul>
                                    <li class="disagree">1</li>
                                    <li class="angry">4</li>
                                </ul>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="popup-bottom">
            <div class="btn-wrap">
                <button type="button" class="btn cg-line" data-btn-size="m">삭제</button>
                <button type="button" class="btn" data-btn-size="m">수정</button>
                <button type="button" class="btn black" data-btn-size="m">닫기</button>
            </div>
        </div>
        <div class="emoji-box" hidden>
            <ul>
                <li>
                    <button type="button" class="like">좋아요</button>
                </li>
                <li>
                    <button type="button" class="fun">재밌어요</button>
                </li>
                <li>
                    <button type="button" class="useful">유익해요</button>
                </li>
                <li>
                    <button type="button" class="disagree">동의못해요</button>
                </li>
                <li>
                    <button type="button" class="angry">화나요</button>
                </li>
            </ul>
        </div>
    </div>
</body>
</html>

<script>
    $(function (){
        // 추천버튼 클릭 시 이모지 박스 오픈
        const $emojiBox = $('.emoji-box');
        let isOpen = false;
        let $currentBtn = null;

        $(document).on('click', '.emoji-open', function(e) {
            e.stopPropagation();

            const $btn = $(this);
            $currentRecommand = $btn.closest('.recommand-flex');
            openEmojiBox($btn);
        })

        $(document).on('click', '.emoji-box', function (e) {
            e.stopPropagation();
        });
        
        $(document).on('click', function () {
            if (isOpen) {
                closeEmojiBox();
            }
        });

        function openEmojiBox($btn) {
            const btnRect = $btn[0].getBoundingClientRect();
            const emojiHeight = $emojiBox.outerHeight();
            const gap = 8;

            let top = btnRect.top + window.scrollY - emojiHeight - gap;
            let left = btnRect.left + window.scrollX;

            if (top < window.scrollY) {
                top = btnRect.bottom + window.scrollY + gap;
            }

            $emojiBox.css({top: top, left: left}).removeAttr('hidden').show();
            isOpen = true;
            $currentBtn = $btn;
        }

        function closeEmojiBox() {
            $emojiBox.hide().attr('hidden', true);
            isOpen = false;
            $currentBtn = null;
        }

        // TEXT/NUMBER INPUT 삭제버튼
        // input에 포커스 되었고, 값이 있는 상태면 has-value 클래스 추가
        // delete btn 클릭 시 input에 값 삭제 및 has-value 클래스 제거 후 다시 input focus
        $(document)
        .on('focus', '.input-type-txt .common-input', function () {
            const $input = $(this);
            const $wrap = $input.closest('.input-type-txt');

            if ($input.val().length > 0) {
                $wrap.addClass('has-value');
            }
        })

        .on('input', '.input-type-txt .common-input', function () {
            const $input = $(this);
            const $wrap = $input.closest('.input-type-txt');

            if ($input.val().length > 0) {
                $wrap.addClass('has-value');
            } else {
                $wrap.removeClass('has-value');
            }
        })

        .on('blur', '.input-type-txt .common-input', function () {
            const $wrap = $(this).closest('.input-type-txt');
            $wrap.removeClass('has-value');
        })

        .on('mousedown', '.input-type-txt .delete-btn', function (e) {
            e.preventDefault();

            const $wrap = $(this).closest('.input-type-txt');
            const $input = $wrap.find('.common-input');

            $input.val('');
            $wrap.removeClass('has-value');

            setTimeout(function () {
                $input.focus();
            }, 0);
        });
    })
</script>